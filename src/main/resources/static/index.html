<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="/favicon.ico">
    <title>正在加载中</title>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=nH5MljbSZqw21joZydvfbW6jGXZBOu6c"></script>
  <link href="/js/0.js" rel="prefetch"><link href="/js/1.js" rel="prefetch"><link href="/js/2.js" rel="prefetch"><link href="/js/3.js" rel="prefetch"><link href="/js/4.js" rel="prefetch"><link href="/js/5.js" rel="prefetch"><link href="/js/app.js" rel="preload" as="script"><link href="/js/chunk-vendors.js" rel="preload" as="script"></head>
  <body>
    <noscript>
      <strong>We're sorry but vueue doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  <script type="text/javascript" src="/js/chunk-vendors.js"></script><script type="text/javascript" src="/js/app.js"></script></body>
  <style>
    html{
      height: 100%;
      display: flex;
    }

    body{
      flex: 1;
      margin: 0;
      width: 100%;
    }

  </style>
<script>

  let start_index = 0;
  let end_index = 0;
  let translatedPoints=[];
  let radarList = [];
  let f = function () {};

  function doPointTranslate(list, callback) {
    radarList = list;
    f = callback;
    start_index = 0;
    end_index = 0;
    translatedPoints=[];
    point_translate();
  }

  function point_translate(){
    let pointList = [];
    while (end_index < radarList.length && pointList.length < 10){
      let point = new BMap.Point(radarList[end_index].lng, radarList[end_index].lat);
      pointList.push(point);
      end_index++;
    }
    let convertor = new BMap.Convertor();
    convertor.translate(pointList, 1, 5, translate_callback);
  }

  translate_callback = function(data) {
    for (let i = 0; i < data.points.length; i++) {
      translatedPoints.push(data.points[i]);
      }
    if (end_index < radarList.length){
      start_index += 10;
      point_translate();
    }
    else {
      f(translatedPoints);
    }
  };
</script>
</html>
