(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a69dc160"],{"1dde":function(e,t,a){var r=a("d039"),n=a("b622"),i=a("2d00"),l=n("species");e.exports=function(e){return i>=51||!r((function(){var t=[],a=t.constructor={};return a[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"44e0":function(e,t,a){},"65f0":function(e,t,a){var r=a("861d"),n=a("e8b5"),i=a("b622"),l=i("species");e.exports=function(e,t){var a;return n(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[l],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},"7db0":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").find,i=a("44d2"),l=a("ae40"),o="find",s=!0,c=l(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},8418:function(e,t,a){"use strict";var r=a("c04e"),n=a("9bf2"),i=a("5c6c");e.exports=function(e,t,a){var l=r(t);l in e?n.f(e,l,i(0,a)):e[l]=a}},8435:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[e._v(" 数据管理 ")]),a("el-main",[a("el-card",{attrs:{shadow:"hover"}},[a("el-tabs",{model:{value:e.tabsActive,callback:function(t){e.tabsActive=t},expression:"tabsActive"}},[a("el-tab-pane",{attrs:{label:"实测数据",name:"measured"}},[a("measured-table")],1),a("el-tab-pane",{attrs:{label:"遥测水位",name:"radar"}},[a("radar-table")],1),a("el-tab-pane",{attrs:{label:"水域面积",name:"area"}},[a("area-table")],1),a("el-tab-pane",{attrs:{label:"影像管理",name:"image"}},[e.showImageTab?a("image-table"):e._e()],1),a("el-tab-pane",{attrs:{label:"模型管理",name:"model"}},[a("el-row",{staticStyle:{height:"100px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-set-up"},on:{click:e.handleEditLevelModelsClick}},[e._v(" 水位模型 ")])],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"success",icon:"el-icon-set-up"},on:{click:e.handleEditAreaModelsClick}},[e._v("水域面积模型 ")])],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-set-up"},on:{click:e.handleEditStorageModelsClick}},[e._v("蓄水量模型 ")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"水库管理",name:"reservoir"}},[a("el-row",{staticStyle:{height:"100px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-add-location"},on:{click:e.handleAddReservoirClick}},[e._v(" 添加水库 ")])],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"info",icon:"el-icon-delete-location"},on:{click:e.handleEditReservoirClick}},[e._v("修改/删除水库")])],1)],1)],1)],1)],1)],1)],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{"max-height":"100%"},attrs:{data:e.measuredList,fit:!0}},[a("el-table-column",{attrs:{label:"日期",prop:"date",align:"center",sortable:"",formatter:e.getDateStringFromTimestamp}}),a("el-table-column",{attrs:{label:"水库",prop:"siteName",align:"center",filters:e.filters.reservoir,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{label:"水位/m",prop:"waterLevel","header-align":"center",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"蓄水量/亿m³",prop:"measuredStorage","header-align":"center",align:"center",formatter:e.getMeasuredStorage,sortable:""}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{attrs:{title:"操作不可复原，确定删除吗？",icon:"el-icon-info",iconColor:"red"},on:{onConfirm:function(a){return e.handleSingleDeleteClick(t.row.id)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])})],1)],1)},l=[],o=(a("7db0"),a("c740"),a("a434"),{name:"dataManagementMeasuredTable",data:function(){return{measuredList:[],filters:{reservoir:[]}}},methods:{getDateStringFromTimestamp:function(e){return new Date(e.date).toLocaleDateString()},getMeasuredStorage:function(e){return 1*e.measuredStorage===0?"-":e.measuredStorage},filterHandler:function(e,t,a){var r=a["property"];return t[r]===e+""},handleSingleDeleteClick:function(e){var t=this;this.axios.get("/api/data/measured/delete",{params:{sList:e}}).then((function(a){200===a.status&&(t.measuredList.splice(t.measuredList.findIndex((function(t){return t.id===e})),1),t.$notify({title:"成功",message:"记录已删除",type:"success"}))}))},loadData:function(){var e=this,t=this;this.axios.get("/api/data/measured").then((function(a){if(200===a.status){e.measuredList=a.data;for(var r=function(a){void 0===e.filters.reservoir.find((function(t){return t.text===e.measuredList[a].siteName}))&&t.filters.reservoir.push({text:e.measuredList[a].siteName,value:e.measuredList[a].siteName})},n=0;n<e.measuredList.length;n++)r(n)}else console.log("error")}))}},mounted:function(){this.loadData()}}),s=o,c=a("2877"),u=Object(c["a"])(s,i,l,!1,null,"27b76582",null),d=u.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.measuredList,fit:!0,lazy:""}},[a("el-table-column",{attrs:{label:"日期",prop:"date",align:"center",sortable:"",formatter:e.getDateStringFromTimestamp}}),a("el-table-column",{attrs:{label:"水库",prop:"reservoirName",align:"center",filters:e.filters.reservoir,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{label:"卫星名称",prop:"satelliteName",align:"center",filters:e.filters.reservoir,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{label:"经度",prop:"lng",align:"center"}}),a("el-table-column",{attrs:{label:"纬度",prop:"lat",align:"center"}}),a("el-table-column",{attrs:{label:"水位/m",prop:"level","header-align":"center",align:"center",sortable:""}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{attrs:{title:"操作不可复原，确定删除吗？",icon:"el-icon-info",iconColor:"red"},on:{onConfirm:function(a){return e.handleSingleDeleteClick(t.row.id)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])})],1)],1)},m=[],p={name:"dataManagementRadarTable",data:function(){return{measuredList:[],filters:{reservoir:[]}}},methods:{getDateStringFromTimestamp:function(e){return new Date(e.date).toLocaleDateString()},getMeasuredStorage:function(e){return 1*e.measuredStorage===0?"-":e.measuredStorage},filterHandler:function(e,t,a){var r=a["property"];return t[r]===e+""},handleSingleDeleteClick:function(e){var t=this;this.axios.get("/api/data/radar/delete",{params:{sList:e}}).then((function(a){200===a.status&&(t.measuredList.splice(t.measuredList.findIndex((function(t){return t.id===e})),1),t.$notify({title:"成功",message:"记录已删除",type:"success"}))}))},loadData:function(){var e=this,t=this;this.axios.get("/api/data/radar").then((function(a){if(200===a.status){e.measuredList=a.data;for(var r=function(a){void 0===e.filters.reservoir.find((function(t){return t.text===e.measuredList[a].siteName}))&&t.filters.reservoir.push({text:e.measuredList[a].siteName,value:e.measuredList[a].siteName})},n=0;n<e.measuredList.length;n++)r(n)}else console.log("error")}))}},mounted:function(){this.loadData()}},g=p,h=Object(c["a"])(g,f,m,!1,null,"af087c34",null),b=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.areaList,fit:!0,lazy:""}},[a("el-table-column",{attrs:{label:"日期",prop:"date",align:"center",sortable:"",formatter:e.getDateStringFromTimestamp}}),a("el-table-column",{attrs:{label:"水库",prop:"reservoirName",align:"center",filters:e.filters.reservoir,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{label:"水域面积/km²",prop:"area",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"来源",prop:"type","header-align":"center",align:"center",filters:e.filters.type,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{attrs:{title:"操作不可复原，确定删除吗？",icon:"el-icon-info",iconColor:"red"},on:{onConfirm:function(a){return e.handleSingleDeleteClick(t.row.id)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])})],1)],1)},y=[],L={name:"dataManagementAreaTable",data:function(){return{areaList:[],filters:{reservoir:[],type:[]}}},methods:{getDateStringFromTimestamp:function(e){return new Date(e.date).toLocaleDateString()},filterHandler:function(e,t,a){var r=a["property"];return t[r]===e+""},handleSingleDeleteClick:function(e){var t=this;this.axios.get("/api/data/area/delete",{params:{sList:e}}).then((function(a){200===a.status&&(t.areaList.splice(t.areaList.findIndex((function(t){return t.id===e})),1),t.$notify({title:"成功",message:"记录已删除",type:"success"}))}))},loadData:function(){var e=this,t=this;this.axios.get("/api/data/area").then((function(a){if(200===a.status){e.areaList=a.data;for(var r=function(a){void 0===e.filters.reservoir.find((function(t){return t.text===e.areaList[a].reservoirName}))&&t.filters.reservoir.push({text:e.areaList[a].reservoirName,value:e.areaList[a].reservoirName}),void 0===e.filters.type.find((function(t){return t.text===e.areaList[a].type}))&&t.filters.type.push({text:e.areaList[a].type,value:e.areaList[a].type}),e.areaList[a].area=1e-6*e.areaList[a].area},n=0;n<e.areaList.length;n++)r(n)}else console.log("error")}))}},mounted:function(){this.loadData()}},x=L,w=Object(c["a"])(x,v,y,!1,null,"50633b62",null),S=w.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.imageList,fit:!0}},[a("el-table-column",{attrs:{label:"水库",prop:"rname",width:"100",align:"center",filters:e.filters.reservoir,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{label:"缩略图",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{src:"/api/data/getImageData?type="+e.row.type+"&id="+e.row.id,"preview-src-list":["/api/data/getImageData?type="+e.row.type+"&id="+e.row.id]}})]}}])}),a("el-table-column",{attrs:{label:"图片路径",prop:"path","header-align":"center"}}),a("el-table-column",{attrs:{label:"日期",prop:"date",width:"150",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"数据来源",prop:"satelliteName",width:"100",align:"center",filters:e.filters.satelliteName,"filter-method":e.filterHandler}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:"下载",placement:"left"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-download",circle:""},on:{click:function(a){return e.download(t.row.type,t.row.id)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"right"}},[a("el-popconfirm",{attrs:{title:"操作不可复原，确定删除吗？",icon:"el-icon-info",iconColor:"red"},on:{onConfirm:function(a){return e.handleSingleDeleteClick(t.row.id,t.row.type)}}},[a("el-button",{attrs:{slot:"reference",size:"small",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)]}}])})],1)],1)},C=[],D={name:"dataManagementImageTable",data:function(){return{imageList:[],filters:{reservoir:[],satelliteName:[]}}},methods:{download:function(e,t){var a=document.createElement("iframe");a.src="/api/download/image?type="+e+"&id="+t,a.style.display="none",document.body.appendChild(a)},filterHandler:function(e,t,a){var r=a["property"];return t[r]===e+""},handleSingleDeleteClick:function(e,t){var a=this;this.axios.get("api/data/image/delete",{params:{id:e,type:t}}).then((function(t){200===t.status&&(a.imageList.splice(a.imageList.findIndex((function(t){return t.id===e})),1),a.$notify({title:"成功",message:"影像已删除",type:"success"}))}))}},mounted:function(){var e=this,t=this;this.axios.get("/api/data/image").then((function(a){if(200===a.status){e.imageList=a.data;for(var r=function(a){void 0===e.filters.reservoir.find((function(t){return t.text===e.imageList[a].rname}))&&t.filters.reservoir.push({text:e.imageList[a].rname,value:e.imageList[a].rname}),void 0===e.filters.satelliteName.find((function(t){return t.text===e.imageList[a].satelliteName}))&&t.filters.satelliteName.push({text:e.imageList[a].satelliteName,value:e.imageList[a].satelliteName})},n=0;n<e.imageList.length;n++)r(n)}else console.log("error")}))}},_=D,A=Object(c["a"])(_,k,C,!1,null,"b56afdf6",null),N=A.exports,T={name:"dataManagement",components:{imageTable:N,measuredTable:d,radarTable:b,areaTable:S},props:[],data:function(){return{tabsActive:"measured",showedImageTab:!1}},computed:{showImageTab:function(){var e=this;return"image"===e.tabsActive&&(e.showedImageTab=!0),e.showedImageTab}},methods:{handleEditLevelModelsClick:function(){this.$router.push("/model/level")},handleEditAreaModelsClick:function(){this.$router.push("/model/area")},handleEditStorageModelsClick:function(){this.$router.push("/model/storage")},handleAddReservoirClick:function(){this.$router.push("/add-reservoir")},handleEditReservoirClick:function(){this.$router.push("/edit-reservoir")}}},M=T,E=(a("cb28"),Object(c["a"])(M,r,n,!1,null,"55ceb704",null));t["default"]=E.exports},a434:function(e,t,a){"use strict";var r=a("23e7"),n=a("23cb"),i=a("a691"),l=a("50c4"),o=a("7b0b"),s=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var a,r,u,d,f,m,v=o(this),y=l(v.length),L=n(e,y),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=y-L):(a=x-2,r=g(p(i(t),0),y-L)),y+a-r>h)throw TypeError(b);for(u=s(v,r),d=0;d<r;d++)f=L+d,f in v&&c(u,d,v[f]);if(u.length=r,a<r){for(d=L;d<y-r;d++)f=d+r,m=d+a,f in v?v[m]=v[f]:delete v[m];for(d=y;d>y-r+a;d--)delete v[d-1]}else if(a>r)for(d=y-r;d>L;d--)f=d+r-1,m=d+a-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<a;d++)v[d+L]=arguments[d+2];return v.length=y-r+a,u}})},b727:function(e,t,a){var r=a("0366"),n=a("44ad"),i=a("7b0b"),l=a("50c4"),o=a("65f0"),s=[].push,c=function(e){var t=1==e,a=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d;return function(m,p,g,h){for(var b,v,y=i(m),L=n(y),x=r(p,g,3),w=l(L.length),S=0,k=h||o,C=t?k(m,w):a?k(m,0):void 0;w>S;S++)if((f||S in L)&&(b=L[S],v=x(b,S,y),e))if(t)C[S]=v;else if(v)switch(e){case 3:return!0;case 5:return b;case 6:return S;case 2:s.call(C,b)}else if(u)return!1;return d?-1:c||u?u:C}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c740:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").findIndex,i=a("44d2"),l=a("ae40"),o="findIndex",s=!0,c=l(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},cb28:function(e,t,a){"use strict";var r=a("44e0"),n=a.n(r);n.a},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-a69dc160.186b8b23.js.map