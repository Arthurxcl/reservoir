(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1d18ac4"],{"186e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",[e._v(" 选择水库 ")]),n("el-main",[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:18}},[n("el-card",{attrs:{shadow:"hover","body-style":{flex:"1",display:"flex",padding:"10px"}}},[n("baidu-map",{staticClass:"select-map-baidu",attrs:{"scroll-wheel-zoom":!0,center:e.center,zoom:e.zoom},on:{moving:e.updateCenterValue,moveend:e.updateCenterValue,zoomend:e.updateCenterValue,click:e.handleMapClick}},[n("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0},on:{locationSuccess:e.handleLocationSuccess}}),e.showPointer?n("bm-marker",{attrs:{position:e.centerDisplay,icon:e.pointer,offset:{height:0,width:15}}}):e._e()],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-card",{staticClass:"map-info",attrs:{shadow:"hover"}},[n("el-form",{staticClass:"reservoir-select"},[n("el-form-item",{attrs:{label:"系统已记录:"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleSelectChange},model:{value:e.selectedReservoir,callback:function(t){e.selectedReservoir=t},expression:"selectedReservoir"}},e._l(e.reservoirList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.name}},[e._v(e._s(t.name)+" ")])})),1)],1)],1),n("el-divider"),n("el-form",{attrs:{"label-position":"right"}},[n("el-form-item",{attrs:{label:"经度:"}},[n("el-input",{on:{change:e.syncCenterValue},model:{value:e.centerDisplay.lng,callback:function(t){e.$set(e.centerDisplay,"lng",e._n(t))},expression:"centerDisplay.lng"}})],1),n("el-form-item",{attrs:{label:"纬度:"}},[n("el-input",{on:{change:e.syncCenterValue},model:{value:e.centerDisplay.lat,callback:function(t){e.$set(e.centerDisplay,"lat",e._n(t))},expression:"centerDisplay.lat"}})],1),n("el-form-item",[n("el-button",{attrs:{disabled:e.checkCenterValueDifferent},on:{click:e.syncCenterValue}},[e._v("定位")])],1),n("el-form-item",[n("el-button",{attrs:{type:"success"}},[e._v("确定")])],1)],1)],1)],1)],1)],1)],1)],1)},i=[],a=(n("b0c0"),n("a9e3"),{name:"selectOnMap",components:{},data:function(){return{selectedReservoir:"",center:{lng:116.404,lat:39.915},centerDisplay:{lng:116.404,lat:39.915},pointer:{url:"/marker.png",size:{width:50,height:50}},showPointer:!1,zoom:11,reservoirList:[]}},methods:{handleSelectChange:function(e){this.showPointer=!1;for(var t=this.reservoirList,n=0;n<t.length;n++)if(t[n].name===e){var r=t[n];this.selectedReservoir=r.name,this.centerDisplay.lng=.5*(Number(r.longitudeLeft)+Number(r.longitudeRight)),this.centerDisplay.lat=.5*(Number(r.latitudeLeft)+Number(r.latitudeRight)),this.syncCenterValue(),this.zoom=11;break}},handleMapClick:function(e){var t=this;this.showPointer=!0,this.centerDisplay.lng=e.point.lng,this.centerDisplay.lat=e.point.lat;for(var n=function(n){e.point.lng>=t.reservoirList[n].longitudeLeft&&e.point.lng<=t.reservoirList[n].longitudeRight&&e.point.lat>=t.reservoirList[n].latitudeRight&&e.point.lat<=t.reservoirList[n].latitudeLeft?t.axios.get("/api/map/isWaterArea?lng="+e.point.lng+"&lat="+e.point.lat+"&zoom="+t.zoom).then((function(e){e.data?t.selectedReservoir=t.reservoirList[n].name:t.selectedReservoir=""})):t.selectedReservoir=""},r=0;r<this.reservoirList.length;r++)n(r)},syncCenterValue:function(){this.center.lng=this.centerDisplay.lng,this.center.lat=this.centerDisplay.lat},updateCenterValue:function(e){var t=e.target.getCenter();this.center.lng=t.lng,this.center.lat=t.lat,this.zoom=e.target.getZoom()},handleLocationSuccess:function(e){var t=this;this.centerDisplay.lng=e.point.lng,this.centerDisplay.lat=e.point.lat,this.center.lng=e.point.lng,this.center.lat=e.point.lat;for(var n=function(n){e.point.lng>=t.reservoirList[n].longitudeLeft&&e.point.lng<=t.reservoirList[n].longitudeRight&&e.point.lat>=t.reservoirList[n].latitudeRight&&e.point.lat<=t.reservoirList[n].latitudeLeft?t.axios.get("/api/map/isWaterArea?lng="+e.point.lng+"&lat="+e.point.lat+"&zoom="+t.zoom).then((function(e){e.data?t.selectedReservoir=t.reservoirList[n].name:t.selectedReservoir=""})):t.selectedReservoir=""},r=0;r<this.reservoirList.length;r++)n(r)},submitReservoirName:function(){""!==this.selectedReservoir&&this.axios.get("api/setReservoirId?rname="+this.selectedReservoir).then((function(e){e.data}))}},computed:{checkCenterValueDifferent:function(){return this.center.lng===this.centerDisplay.lng&&this.center.lat===this.centerDisplay.lat}},created:function(){var e=this;this.axios.get("/api/reservoirInfo/reservoir").then((function(t){200===t.status?e.reservoirList=t.data:console.log("error")}))}}),o=a,s=(n("cc3e"),n("2877")),l=Object(s["a"])(o,r,i,!1,null,"6a492fb2",null);t["default"]=l.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),i=n("5899"),a="["+i+"]",o=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),l=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(e,t,n){var r=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var a,o;return i&&"function"==typeof(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&i(e,o),e}},"8f1f":function(e,t,n){},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),a=n("94ca"),o=n("6eeb"),s=n("5135"),l=n("c6b6"),c=n("7156"),u=n("c04e"),p=n("d039"),f=n("7c73"),h=n("241c").f,d=n("06cf").f,g=n("9bf2").f,v=n("58a8").trim,m="Number",b=i[m],y=b.prototype,L=l(f(y))==m,R=function(e){var t,n,r,i,a,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=c.slice(2),o=a.length,s=0;s<o;s++)if(l=a.charCodeAt(s),l<48||l>i)return NaN;return parseInt(a,r)}return+c};if(a(m,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var N,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(L?p((function(){y.valueOf.call(n)})):l(n)!=m)?c(new b(R(t)),n,C):R(t)},I=r?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;I.length>_;_++)s(b,N=I[_])&&!s(C,N)&&g(C,N,d(b,N));C.prototype=y,y.constructor=C,o(i,m,C)}},b0c0:function(e,t,n){var r=n("83ab"),i=n("9bf2").f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,l="name";!r||l in a||i(a,l,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},cc3e:function(e,t,n){"use strict";var r=n("8f1f"),i=n.n(r);i.a}}]);
//# sourceMappingURL=chunk-b1d18ac4.106651eb.js.map