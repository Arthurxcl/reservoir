{"version":3,"sources":["webpack:///./src/views/uploadMeasuredLevel.vue?545e","webpack:///src/views/uploadMeasuredLevel.vue","webpack:///./src/views/uploadMeasuredLevel.vue?6847","webpack:///./src/views/uploadMeasuredLevel.vue","webpack:///./src/views/uploadMeasuredLevel.vue?9bd3"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","attrs","directives","name","rawName","value","step","expression","model","callback","$$v","selectedReservoir","_l","item","key","id","_s","staticClass","handleFileChanges","fileList","stepOneClickNextDisable","on","stepOneClickNext","resultList","stepTwoClickSave","stepTwoClickBack","stepThreeClickWatchData","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,eAAe,CAACA,EAAG,YAAY,CAACJ,EAAIM,GAAG,cAAcF,EAAG,UAAU,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,OAAS,KAAK,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,UAAU,CAACI,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAkB,IAAXX,EAAIY,KAAUC,WAAW,aAAaN,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,UAAU,CAACG,MAAM,CAAC,cAAc,QAAQ,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,OAAOO,MAAM,CAACH,MAAOX,EAAqB,kBAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,kBAAkBD,GAAKH,WAAW,sBAAsBb,EAAIkB,GAAIlB,EAAiB,eAAE,SAASmB,GAAM,OAAOf,EAAG,YAAY,CAACgB,IAAID,EAAKE,GAAGd,MAAM,CAAC,MAAQY,EAAKV,KAAK,MAAQU,EAAKV,OAAO,CAACT,EAAIM,GAAG,IAAIN,EAAIsB,GAAGH,EAAKV,MAAM,UAAS,IAAI,GAAGL,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACmB,YAAY,mBAAmBhB,MAAM,CAAC,KAAO,GAAG,OAAS,GAAG,MAAQ,EAAE,eAAc,EAAM,kBAAiB,EAAK,YAAYP,EAAIwB,kBAAkB,YAAYxB,EAAIwB,kBAAkB,UAAW,EAAM,YAAYxB,EAAIyB,WAAW,CAACrB,EAAG,IAAI,CAACmB,YAAY,mBAAmBnB,EAAG,MAAM,CAACmB,YAAY,mBAAmB,CAACvB,EAAIM,GAAG,aAAaF,EAAG,KAAK,CAACJ,EAAIM,GAAG,eAAe,GAAGF,EAAG,YAAY,CAACG,MAAM,CAAC,SAAWP,EAAI0B,yBAAyBC,GAAG,CAAC,MAAQ3B,EAAI4B,mBAAmB,CAAC5B,EAAIM,GAAG,YAAY,IAAI,GAAGF,EAAG,UAAU,CAACI,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAkB,IAAXX,EAAIY,KAAUC,WAAW,aAAaN,MAAM,CAAC,OAAS,UAAU,CAACP,EAAIM,GAAG,kBAAkBF,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOP,EAAI6B,WAAW,QAAS,IAAO,CAACzB,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,WAAW,MAAQ,QAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,aAAa,MAAQ,QAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,kBAAkB,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,SAAS,GAAGH,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWoB,GAAG,CAAC,MAAQ3B,EAAI8B,mBAAmB,CAAC9B,EAAIM,GAAG,aAAaF,EAAG,YAAY,CAACuB,GAAG,CAAC,MAAQ3B,EAAI+B,mBAAmB,CAAC/B,EAAIM,GAAG,YAAY,GAAGF,EAAG,UAAU,CAACI,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAkB,IAAXX,EAAIY,KAAUC,WAAW,aAAaN,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,IAAI,CAACmB,YAAY,oBAAoBvB,EAAIM,GAAG,WAAWF,EAAG,YAAY,CAACuB,GAAG,CAAC,MAAQ3B,EAAIgC,0BAA0B,CAAChC,EAAIM,GAAG,aAAa,IAAI,GAAGF,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,IAAI,CAACH,EAAG,UAAU,CAACG,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,UAAY,WAAW,OAASP,EAAIY,KAAK,IAAI,CAACR,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAc,0BAA0BH,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAc,cAAcH,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,WAAW,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IACviF0B,EAAkB,GCsGtB,GACE,KAAF,sBACE,KAAF,WACI,MAAJ,CACM,SAAN,GACM,cAAN,GACM,kBAAN,GACM,WAAN,GACM,KAAN,IAGE,SAAF,CACI,wBADJ,WAEM,MAAN,wDAGE,QAAF,CACI,kBAAJ,cACM,KAAN,YAEI,iBAAJ,WAAM,IAAN,OAEA,eACM,EAAN,+CACM,EAAN,4CACM,KAAN,OACQ,IAAR,mBACQ,OAAR,OACQ,KAAR,EACQ,QAAR,CACU,eAAV,uCAEA,kBACQ,GAAR,gBACU,EAAV,kBACU,IAAV,kCACY,QAAZ,8CACY,EAAZ,iFAEU,EAAV,YAII,iBAAJ,WACM,KAAN,QAEI,iBAAJ,WAAM,IAAN,OACM,KAAN,qDACA,eACU,EAAV,OAGU,QAAV,iBAII,wBAAJ,WACM,KAAN,sBAKE,QA9DF,WA8DI,IAAJ,OACI,KAAJ,4DACA,eACQ,EAAR,qBAGQ,QAAR,kBC3K6V,I,wBCQzVC,EAAY,eACd,EACAnC,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,kECnBf,yBAAkf,EAAG","file":"js/chunk-1065d9a2.02c299f0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-container',[_c('el-header',[_vm._v(\" 上传实测水位 \")]),_c('el-main',[_c('el-row',{attrs:{\"gutter\":15}},[_c('el-col',{attrs:{\"span\":18}},[_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step===1),expression:\"step===1\"}],attrs:{\"shadow\":\"hover\"}},[_c('el-form',{attrs:{\"label-width\":\"20%\"}},[_c('el-form-item',{attrs:{\"label\":\"水库名称\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedReservoir),callback:function ($$v) {_vm.selectedReservoir=$$v},expression:\"selectedReservoir\"}},_vm._l((_vm.reservoirList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"选择文件\"}},[_c('el-upload',{staticClass:\"upload-drag-list\",attrs:{\"drag\":\"\",\"action\":\"\",\"limit\":1,\"auto-upload\":false,\"show-file-list\":true,\"on-change\":_vm.handleFileChanges,\"on-remove\":_vm.handleFileChanges,\"multiple\":false,\"file-list\":_vm.fileList}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])])])],1),_c('el-button',{attrs:{\"disabled\":_vm.stepOneClickNextDisable},on:{\"click\":_vm.stepOneClickNext}},[_vm._v(\" 下一步 \")])],1)],1),_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step===2),expression:\"step===2\"}],attrs:{\"shadow\":\"hover\"}},[_vm._v(\" 从文件中提取到以下数据： \"),_c('el-table',{attrs:{\"data\":_vm.resultList,\"border\":true}},[_c('el-table-column',{attrs:{\"prop\":\"siteName\",\"label\":\"站名\"}}),_c('el-table-column',{attrs:{\"prop\":\"waterLevel\",\"label\":\"水位\"}}),_c('el-table-column',{attrs:{\"prop\":\"measuredStorage\",\"label\":\"蓄水量\"}}),_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"日期\"}})],1),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.stepTwoClickSave}},[_vm._v(\" 确认并保存 \")]),_c('el-button',{on:{\"click\":_vm.stepTwoClickBack}},[_vm._v(\" 上一步 \")])],1),_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step===3),expression:\"step===3\"}],attrs:{\"shadow\":\"hover\"}},[_c('i',{staticClass:\"el-icon-success\"}),_vm._v(\" 数据已保存 \"),_c('el-button',{on:{\"click\":_vm.stepThreeClickWatchData}},[_vm._v(\" 查看数据 \")])],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('el-steps',{attrs:{\"direction\":\"vertical\",\"active\":_vm.step-1}},[_c('el-step',{attrs:{\"title\":\"上传文件\",\"description\":\"选择目标水库，上传实测水位Excel文件\"}}),_c('el-step',{attrs:{\"title\":\"确认数据\",\"description\":\"确认数据提取结果\"}}),_c('el-step',{attrs:{\"title\":\"上传完成\"}})],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-container>\r\n            <el-header>\r\n                上传实测水位\r\n            </el-header>\r\n            <el-main>\r\n                <el-row :gutter=\"15\">\r\n                    <el-col :span=\"18\">\r\n                        <el-card shadow=\"hover\" v-show=\"step===1\">\r\n                            <el-form label-width=\"20%\">\r\n                                <el-form-item label=\"水库名称\">\r\n                                    <el-select v-model=\"selectedReservoir\"\r\n                                               placeholder=\"请选择\">\r\n                                        <el-option\r\n                                                v-for=\"item in reservoirList\"\r\n                                                :label=\"item.name\"\r\n                                                :value=\"item.name\"\r\n                                                :key=\"item.id\">\r\n                                            {{item.name}}\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"选择文件\">\r\n                                    <el-upload\r\n                                            class=\"upload-drag-list\"\r\n                                            drag\r\n                                            action=\"\"\r\n                                            :limit=\"1\"\r\n                                            :auto-upload=\"false\"\r\n                                            :show-file-list=\"true\"\r\n                                            :on-change=\"handleFileChanges\"\r\n                                            :on-remove=\"handleFileChanges\"\r\n                                            :multiple=\"false\"\r\n                                            :file-list=\"fileList\">\r\n                                        <i class=\"el-icon-upload\"></i>\r\n                                        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n                                    </el-upload>\r\n                                </el-form-item>\r\n                                <el-button @click=\"stepOneClickNext\" :disabled=\"stepOneClickNextDisable\">\r\n                                    下一步\r\n                                </el-button>\r\n                            </el-form>\r\n                        </el-card>\r\n                        <el-card shadow=\"hover\" v-show=\"step===2\">\r\n                                从文件中提取到以下数据：\r\n                                <el-table\r\n                                        :data=\"resultList\"\r\n                                        :border=\"true\"\r\n                                >\r\n                                    <el-table-column\r\n                                            prop=\"siteName\"\r\n                                            label=\"站名\"\r\n                                    ></el-table-column>\r\n                                    <el-table-column\r\n                                            prop=\"waterLevel\"\r\n                                            label=\"水位\"\r\n                                    ></el-table-column>\r\n                                    <el-table-column\r\n                                            prop=\"measuredStorage\"\r\n                                            label=\"蓄水量\"\r\n                                    ></el-table-column>\r\n                                    <el-table-column\r\n                                            prop=\"date\"\r\n                                            label=\"日期\"\r\n                                    ></el-table-column>\r\n                                </el-table>\r\n                                <el-button type=\"success\" @click=\"stepTwoClickSave\">\r\n                                    确认并保存\r\n                                </el-button>\r\n                                <el-button @click=\"stepTwoClickBack\">\r\n                                    上一步\r\n                                </el-button>\r\n                        </el-card>\r\n                        <el-card shadow=\"hover\" v-show=\"step===3\">\r\n                                <i class=\"el-icon-success\"></i>\r\n                                数据已保存\r\n                                <el-button @click=\"stepThreeClickWatchData\">\r\n                                    查看数据\r\n                                </el-button>\r\n                        </el-card>\r\n                    </el-col>\r\n\r\n                    <el-col :span=\"6\">\r\n                        <el-card shadow=\"hover\">\r\n                            <el-steps direction=\"vertical\" :active=\"step-1\">\r\n                                <el-step title=\"上传文件\" description=\"选择目标水库，上传实测水位Excel文件\"></el-step>\r\n                                <el-step title=\"确认数据\" description=\"确认数据提取结果\"></el-step>\r\n                                <el-step title=\"上传完成\"></el-step>\r\n                            </el-steps>\r\n                        </el-card>\r\n                    </el-col>\r\n\r\n\r\n                </el-row>\r\n\r\n\r\n            </el-main>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"uploadMeasuredLevel\",\r\n        data: function () {\r\n            return {\r\n                fileList: [],\r\n                reservoirList: [],\r\n                selectedReservoir: '',\r\n                resultList: [],\r\n                step: 1,\r\n            }\r\n        },\r\n        computed:{\r\n            stepOneClickNextDisable(){\r\n                return this.selectedReservoir === ''||this.fileList.length===0;\r\n            }\r\n        },\r\n        methods: {\r\n            handleFileChanges: function (file, fileList) {\r\n                this.fileList = fileList;\r\n            },\r\n            stepOneClickNext: function () {\r\n                //check\r\n                let formData = new FormData();\r\n                formData.append('reservoirName', this.selectedReservoir);\r\n                formData.append('measuredFile', this.fileList[0].raw);\r\n                this.axios({\r\n                    url: \"/upload/measured\",\r\n                    method: \"post\",\r\n                    data: formData,\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data;charset=utf-8\"\r\n                    }\r\n                }).then((response) => {\r\n                    if (response.status === 200) {\r\n                        this.resultList = response.data;\r\n                        for (let i = 0; i<this.resultList.length; i++){\r\n                            console.log(new Date(parseInt(this.resultList[i].date)));\r\n                            this.resultList[i].date = new Date(parseInt(this.resultList[i].date)).toLocaleDateString();\r\n                        }\r\n                        this.step++;\r\n                    }\r\n                })\r\n            },\r\n            stepTwoClickBack: function () {\r\n                this.step--;\r\n            },\r\n            stepTwoClickSave:function () {\r\n                this.axios.get('/upload/measured/save').then((response) => {\r\n                    if (response.status === 200) {\r\n                        this.step++;\r\n\r\n                    } else {\r\n                        console.log(\"error\")\r\n                    }\r\n                })\r\n            },\r\n            stepThreeClickWatchData:function () {\r\n                this.$router.push('/dm')\r\n\r\n            }\r\n\r\n        },\r\n        mounted() {\r\n            this.axios.get('/api/reservoirInfo/reservoir').then((response) => {\r\n                if (response.status === 200) {\r\n                    this.reservoirList = response.data;\r\n\r\n                } else {\r\n                    console.log(\"error\")\r\n                }\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .el-container {\r\n        min-height: 100%;\r\n    }\r\n\r\n    .el-main {\r\n        height: 100%;\r\n        display: inline-flex;\r\n        padding: 0 5px 0 20px;\r\n    }\r\n\r\n    .el-row {\r\n        width: 100%;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .el-col-18 {\r\n        height: 100%;\r\n        overflow-y: auto;\r\n    }\r\n\r\n    .el-col-18::-webkit-scrollbar{\r\n        display: none;\r\n    }\r\n\r\n    .el-progress {\r\n        float: right;\r\n        width: 50%;\r\n        margin-top: 10px;\r\n    }\r\n\r\n    .el-button {\r\n        float: right;\r\n        margin-bottom: 20px;\r\n        margin-left: 20px;\r\n    }\r\n\r\n    .el-table {\r\n        margin-top: 10px;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .el-card {\r\n        border: 1px solid #d4d4d4;\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .upload-drag-list {\r\n        max-width: 70%;\r\n    }\r\n\r\n    .el-steps {\r\n        height: 200px;\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadMeasuredLevel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadMeasuredLevel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./uploadMeasuredLevel.vue?vue&type=template&id=03d3d16b&scoped=true&\"\nimport script from \"./uploadMeasuredLevel.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadMeasuredLevel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uploadMeasuredLevel.vue?vue&type=style&index=0&id=03d3d16b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03d3d16b\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadMeasuredLevel.vue?vue&type=style&index=0&id=03d3d16b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadMeasuredLevel.vue?vue&type=style&index=0&id=03d3d16b&scoped=true&lang=css&\""],"sourceRoot":""}