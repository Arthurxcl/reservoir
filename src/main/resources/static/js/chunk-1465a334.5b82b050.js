(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1465a334"],{"186e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-container",[r("el-header",[e._v(" 选择水库 ")]),r("el-main",[r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:18}},[r("el-card",{attrs:{shadow:"hover","body-style":{flex:"1",display:"flex",padding:"10px"}}},[r("baidu-map",{staticClass:"select-map-baidu",style:e.zoomBack,attrs:{"scroll-wheel-zoom":!0,center:e.center,zoom:e.zoom},on:{moving:e.updateCenterValue,moveend:e.updateCenterValue,zoomend:e.updateCenterValue,click:e.handleMapClick}},[r("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0},on:{locationSuccess:e.handleLocationSuccess}}),e.showPointer?r("bm-marker",{attrs:{position:e.centerDisplay,icon:e.pointer,offset:{height:0,width:15}}}):e._e()],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-card",{staticClass:"map-info",attrs:{shadow:"hover"}},[r("el-form",{staticClass:"reservoir-select"},[r("el-form-item",{attrs:{label:"系统已记录:"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleSelectChange},model:{value:e.selectedReservoir,callback:function(t){e.selectedReservoir=t},expression:"selectedReservoir"}},e._l(e.reservoirList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}},[e._v(e._s(t.name)+" ")])})),1)],1)],1),r("el-divider"),r("el-form",{attrs:{"label-position":"right"}},[r("el-form-item",{attrs:{label:"经度:"}},[r("el-input",{on:{change:e.syncCenterValue},model:{value:e.centerDisplay.lng,callback:function(t){e.$set(e.centerDisplay,"lng",e._n(t))},expression:"centerDisplay.lng"}})],1),r("el-form-item",{attrs:{label:"纬度:"}},[r("el-input",{on:{change:e.syncCenterValue},model:{value:e.centerDisplay.lat,callback:function(t){e.$set(e.centerDisplay,"lat",e._n(t))},expression:"centerDisplay.lat"}})],1),r("el-form-item",[r("el-button",{attrs:{disabled:e.checkCenterValueDifferent},on:{click:e.syncCenterValue}},[e._v("定位 ")])],1),r("el-form-item",[r("el-button",{attrs:{type:"success",disabled:""===e.selectedReservoir},on:{click:e.submitReservoirName}},[e._v("确定 ")])],1)],1)],1)],1)],1)],1)],1)],1)},i=[],a=(r("b0c0"),r("a9e3"),{name:"selectOnMap",components:{},data:function(){return{selectedReservoir:"",center:{lng:116.404,lat:39.915},centerDisplay:{lng:116.404,lat:39.915},pointer:{url:"/marker.png",size:{width:50,height:50}},showPointer:!1,zoom:11,reservoirList:[]}},methods:{handleSelectChange:function(e){this.showPointer=!1;for(var t=this.reservoirList,r=0;r<t.length;r++)if(t[r].name===e){var n=t[r];this.selectedReservoir=n.name,this.centerDisplay.lng=.5*(Number(n.longitudeLeft)+Number(n.longitudeRight)),this.centerDisplay.lat=.5*(Number(n.latitudeLeft)+Number(n.latitudeRight)),this.syncCenterValue(),this.zoom=11;break}},handleMapClick:function(e){var t=this;this.showPointer=!0,this.centerDisplay.lng=e.point.lng,this.centerDisplay.lat=e.point.lat;for(var r=function(r){e.point.lng>=t.reservoirList[r].longitudeLeft&&e.point.lng<=t.reservoirList[r].longitudeRight&&e.point.lat>=t.reservoirList[r].latitudeRight&&e.point.lat<=t.reservoirList[r].latitudeLeft?t.axios.get("/api/map/isWaterArea?lng="+e.point.lng+"&lat="+e.point.lat+"&zoom="+t.zoom).then((function(e){e.data?t.selectedReservoir=t.reservoirList[r].name:t.selectedReservoir=""})):t.selectedReservoir=""},n=0;n<this.reservoirList.length;n++)r(n)},syncCenterValue:function(){this.center.lng=this.centerDisplay.lng,this.center.lat=this.centerDisplay.lat},updateCenterValue:function(e){var t=e.target.getCenter();this.center.lng=t.lng,this.center.lat=t.lat,this.zoom=e.target.getZoom()},handleLocationSuccess:function(e){var t=this;this.centerDisplay.lng=e.point.lng,this.centerDisplay.lat=e.point.lat,this.center.lng=e.point.lng,this.center.lat=e.point.lat;for(var r=function(r){e.point.lng>=t.reservoirList[r].longitudeLeft&&e.point.lng<=t.reservoirList[r].longitudeRight&&e.point.lat>=t.reservoirList[r].latitudeRight&&e.point.lat<=t.reservoirList[r].latitudeLeft?t.axios.get("/api/map/isWaterArea?lng="+e.point.lng+"&lat="+e.point.lat+"&zoom="+t.zoom).then((function(e){e.data?t.selectedReservoir=t.reservoirList[r].name:t.selectedReservoir=""})):t.selectedReservoir=""},n=0;n<this.reservoirList.length;n++)r(n)},submitReservoirName:function(){var e=this;""!==this.selectedReservoir&&this.axios.get("api/setReservoirId",{params:{rname:this.selectedReservoir}}).then((function(t){"success"===t.data&&(e.$store.commit("setReservoir",e.selectedReservoir),e.$router.push("/"))}))}},computed:{checkCenterValueDifferent:function(){return this.center.lng===this.centerDisplay.lng&&this.center.lat===this.centerDisplay.lat},zoomBack:function(){return{zoom:Math.min(1600/window.screen.width,1)+""}}},mounted:function(){var e=this;this.axios.get("/api/reservoirInfo/reservoir").then((function(t){200===t.status?e.reservoirList=t.data:console.log("error")}))}}),s=a,o=(r("56f5"),r("2877")),l=Object(o["a"])(s,n,i,!1,null,"41b6fafb",null);t["default"]=l.exports},"56f5":function(e,t,r){"use strict";var n=r("fa02"),i=r.n(n);i.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),i=r("5899"),a="["+i+"]",s=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),l=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(e,t,r){var n=r("861d"),i=r("d2bb");e.exports=function(e,t,r){var a,s;return i&&"function"==typeof(a=t.constructor)&&a!==r&&n(s=a.prototype)&&s!==r.prototype&&i(e,s),e}},a9e3:function(e,t,r){"use strict";var n=r("83ab"),i=r("da84"),a=r("94ca"),s=r("6eeb"),o=r("5135"),l=r("c6b6"),c=r("7156"),u=r("c04e"),p=r("d039"),h=r("7c73"),f=r("241c").f,d=r("06cf").f,g=r("9bf2").f,v=r("58a8").trim,m="Number",b=i[m],y=b.prototype,R=l(h(y))==m,L=function(e){var t,r,n,i,a,s,o,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(a=c.slice(2),s=a.length,o=0;o<s;o++)if(l=a.charCodeAt(o),l<48||l>i)return NaN;return parseInt(a,n)}return+c};if(a(m,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var N,C=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof C&&(R?p((function(){y.valueOf.call(r)})):l(r)!=m)?c(new b(L(t)),r,C):L(t)},w=n?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;w.length>I;I++)o(b,N=w[I])&&!o(C,N)&&g(C,N,d(b,N));C.prototype=y,y.constructor=C,s(i,m,C)}},b0c0:function(e,t,r){var n=r("83ab"),i=r("9bf2").f,a=Function.prototype,s=a.toString,o=/^\s*function ([^ (]*)/,l="name";!n||l in a||i(a,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},fa02:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1465a334.5b82b050.js.map